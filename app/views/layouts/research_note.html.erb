<!DOCTYPE html>
<html>
<head>
  <title>Answer</title>
  <%= stylesheet_link_tag :all %>
  <%= javascript_include_tag :defaults, "protovis-d3.2.js", "countries.js" %>
  <%= csrf_meta_tag %>
</head>
<body>
	<h1><%= yield :title %></h1>

	<% tags = (yield :tags).strip.split(",") %>
	<% if not content_for?(:tags) or tags.empty? %>
		No tagging
	<% else %>
		<b>Tags:</b> <%=raw tags.map { |t| link_to(t, "/research/by?tagged=#{t}") }.join(", ") %>
	<% end %>
	
	<%= yield :data if content_for?(:data) %>
	
	<h2>Description</h2>
	
	<%= yield :note %>
	
	<h2>Appendix</h2>
	
	<div class="tabs">
	< % tabs_tag do |tab| %>
		< %= tab.data 'Data Set (CSV)', "?appendix_tab=data" %>
		< %= tab.carving 'Carving Code', "?appendix_tab=carving" %>
		< %= tab.tagging 'New Tags (CSV)', "?appendix_tab=tagging" %>
	< % end %>
	</div>
	
	<ul>
		<li>
		<%= link_to "Data Set (CSV)", "/research/#{@path.blank? ? "" : "#{@path}/"}#{@label}.csv" %><br />
		<b>Verification Code:</b>
		<pre>
<%= display "csv/#{@label}_test.rb" %>
		</pre>
		</li>
		<% unless not content_for?(:tags) or tags.empty? %>
		<li>
		<b>Carving Code:</b>
		<pre>
<%= display "tag/#{@label}.rake" %>
		</pre>
		</li>
		<li>
		<%= link_to "New Tags (CSV)", "/research/by.csv?tagged=#{(yield :tags).strip}" %><br />
		<b>Verification Code:</b>
		<pre>
<%= display "tag/#{@label}_test.rb" %>
		</pre>
		</li>
		<% end %>
	</ul>
</body>
</html>
